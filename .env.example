# ============================================
# AI News Context Aggregation Platform
# Environment Variables
# ============================================

# ============================================
# PLATFORM CONFIGURATION
# ============================================

# Node environment
NODE_ENV=development

# API Server Port
PORT=3000

# ============================================
# DATABASE (PostgreSQL with pgvector)
# ============================================

# Platform database URL (required)
DATABASE_URL=postgresql://ainews:ainews@localhost:5432/ainews

# Redis URL for background jobs
REDIS_URL=redis://localhost:6379

# ============================================
# AUTHENTICATION (Privy)
# ============================================

# Privy App credentials (from https://dashboard.privy.io)
PRIVY_APP_ID=your_privy_app_id_here
PRIVY_APP_SECRET=your_privy_app_secret_here

# ============================================
# ENCRYPTION
# ============================================

# 32-byte hex key for encrypting user secrets (Discord tokens, API keys)
# Generate with: openssl rand -hex 32
SECRETS_ENCRYPTION_KEY=your_64_char_hex_encryption_key_here

# ============================================
# PAYMENTS (x402 / pop402)
# ============================================

# pop402 facilitator URL
POP402_FACILITATOR_URL=https://facilitator.pop402.com

# pop402 SKU for Pro subscriptions
POP402_SKU=pro

# pop402 network (solana)
POP402_NETWORK=solana

# Mock mode - for development/testing without a real pop402 facilitator
# When true, purchases are simulated in-memory (no real payments)
# Set to true only if you don't have a pop402 facilitator set up
# POP402_MOCK_MODE=true

# Platform wallet address (Solana) for receiving payment
PLATFORM_WALLET_ADDRESS=your_solana_wallet_address_here

# Platform fee percentage (0-100)
PLATFORM_FEE_PERCENT=10

# ============================================
# AI / EMBEDDINGS
# ============================================

# OpenAI API key (for embeddings and summarization)
OPENAI_API_KEY=your_openai_api_key_here

# Optional: Direct OpenAI key (bypasses OpenRouter)
OPENAI_DIRECT_KEY=

# Use OpenRouter for LLM calls
USE_OPENROUTER=true
SITE_URL=https://your-domain.com/digital-gardener/
SITE_NAME=Digital_Gardener

# ============================================
# DATA SOURCES (Default/Platform configs)
# ============================================

# Discord Bot Configuration
# One token per bot. If a second server uses a different bot, add prefixed vars
# and reference them in that server's config (e.g. SECOND_DISCORD_TOKEN).
DISCORD_APP_ID=your_discord_app_id_here
DISCORD_TOKEN=your_discord_bot_token_here
# SECOND_DISCORD_APP_ID=your_other_app_id_here
# SECOND_DISCORD_TOKEN=your_other_bot_token_here

# API Keys for Data Sources
BIRDEYE_API_KEY=your_birdeye_api_key_here
CODEX_API_KEY=your_codex_api_key_here

# Imgflip Meme Generation (Premium API)
# Required for MemeEnricher - generates contextual memes from content
# Sign up at https://imgflip.com and upgrade to Pro for API access
# For GitHub Actions: Add these to your ENV_SECRETS repository secret as JSON:
#   {"IMGFLIP_USERNAME": "your_username", "IMGFLIP_PASSWORD": "your_password", ...}
IMGFLIP_USERNAME=your_imgflip_username_here
IMGFLIP_PASSWORD=your_imgflip_password_here

# Guild IDs for Discord Servers
# Add one guild ID per server. Name the var to match your config file references.
DISCORD_GUILD_ID=your_main_discord_guild_id_here
# SECOND_DISCORD_GUILD_ID=your_other_guild_id_here

# ============================================
# DEPLOYMENT (Optional)
# ============================================

# Remote server configuration (for GitHub Actions)
SERVER_HOST=your_server_host_or_ip_here
SERVER_USER=your_server_username_here
SERVER_KEY_PATH=/path/to/your/ssh/private/key

# Deployment settings
DEPLOY_BRANCH=main
DATA_BACKUP_ENABLED=true
AUTO_RESTART_ENABLED=true

# Also create SQLITE_ENCRYPTION_KEY secret (generate with: openssl rand -hex 32)
# ============================================
# MCP SERVER (Optional)
# ============================================

# MCP server port
MCP_PORT=3001

# ============================================
# RATE LIMITING
# ============================================

# Free tier limits
FREE_TIER_MAX_CONFIGS=1
FREE_TIER_MAX_RUNS_PER_DAY=1
FREE_TIER_MAX_QUERIES_PER_DAY=100

# Rate limit window (in seconds)
RATE_LIMIT_WINDOW=60

# Requests per window for unauthenticated users
RATE_LIMIT_MAX_REQUESTS=30

# =============================================================================
# ENV_SECRETS JSON Template for GitHub Actions
# =============================================================================
# Copy this JSON object to your repository's ENV_SECRETS secret:
#
# {
#   "OPENAI_API_KEY": "sk-...",
#   "OPENAI_DIRECT_KEY": "sk-...",
#   "USE_OPENROUTER": "true",
#   "SITE_URL": "https://your-domain.com/digital-gardener/",
#   "SITE_NAME": "Digital_Gardener",
#   "DISCORD_APP_ID": "your_discord_app_id",
#   "DISCORD_TOKEN": "your_discord_bot_token",
#   "DISCORD_GUILD_ID": "your_discord_guild_id",
#   "CODEX_API_KEY": "your_codex_key",
#   "BIRDEYE_API_KEY": "your_birdeye_key",
#   "IMGFLIP_USERNAME": "your_imgflip_username",
#   "IMGFLIP_PASSWORD": "your_imgflip_password",
#   "BUNNY_STORAGE_ZONE": "your_bunny_storage_zone",
#   "BUNNY_STORAGE_PASSWORD": "your_bunny_api_password",
#   "BUNNY_CDN_URL": "https://your-custom-cdn.com"
# }

