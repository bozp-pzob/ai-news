---
id: key-data-structures
title: Key Data Structures
sidebar_label: Key Data Structures
---

The AI News Aggregator relies on a set of core TypeScript interfaces defined in `src/types.ts` to ensure data consistency across its various components and plugins. Understanding these structures is crucial for working with the system or developing new plugins.

## `ContentItem`

This is the central and most important data structure. It represents a single, normalized piece of content fetched from any data source. All source plugins must transform their raw data into an array of `ContentItem` objects.

**Key Fields:**

-   `id?: number`: An optional database ID, typically assigned by the storage plugin upon saving.
-   `cid: string`: A **C**ontent **ID** that should be unique for that item from its original source (e.g., a tweet ID, a Discord message ID, a news article URL slug). Used for deduplication.
-   `type: string`: Specifies the nature or category of the content (e.g., `"tweet"`, `"discordRawData"`, `"githubIssue"`, `"codexTokenAnalytics"`). This helps in filtering and specific processing by generators.
-   `source: string`: The `name` of the source plugin instance (as defined in the JSON configuration) that fetched this item (e.g., `"myTwitterFeed"`, `"projectX_Discord"`).
-   `title?: string`: An optional title for the content item (e.g., news article title, GitHub issue title).
-   `text?: string`: The main textual content of the item (e.g., tweet text, article abstract, Discord message content). For some raw data types like `discordRawData`, this field might store a JSON string of the detailed raw object.
-   `link?: string`: A direct URL to the original content item on its source platform.
-   `topics?: string[]`: An optional array of topic strings. This field is typically populated by an `EnricherPlugin` like `AiTopicsEnricher`.
-   `date?: number`: A Unix epoch timestamp (seconds) representing the creation or publication date/time of the content item.
-   `metadata?: { [key: string]: any; }`: An object for storing any additional, source-specific data that doesn't fit into the other standardized fields. This can include author details, engagement metrics (likes, retweets), media URLs, channel/guild IDs for Discord messages, etc.
    -   For example, Twitter items might have `metadata.authorUserName`, `metadata.retweetedByUserName`, `metadata.photos`, `metadata.videos`.
    -   Discord items might store `metadata.channelId`, `metadata.guildName`, `metadata.author`.

## `SummaryItem`

This interface represents a generated summary, which might be derived from one or many `ContentItem`s. Summaries are typically produced by generator plugins.

**Key Fields:**

-   `id?: number`: Optional database ID, assigned by storage.
-   `type: string`: A type identifier for the summary itself (e.g., `"dailyGlobalSummary"`, `"discordChannelSummary_general"`, `"elizaosWeeklyReport"`). This helps distinguish different kinds of generated reports.
-   `title?: string`: An optional title for the summary (e.g., `"Daily AI News - 2024-01-15"`).
-   `categories?: string`: Often used to store the main structured content of the summary as a JSON string. This JSON can represent themed sections, lists of key points, or collections of summarized items, each with their own text, contributing sources, and media.
-   `markdown?: string`: The full summary content rendered in Markdown format, suitable for display or further processing.
-   `date?: number`: A Unix epoch timestamp (seconds) indicating the period or date for which the summary was generated.

## Plugin-Specific Interfaces

While `ContentItem` and `SummaryItem` are universal, `src/types.ts` also defines interfaces crucial for the plugin system itself:

-   `SourcePlugin` (from `src/plugins/sources/ContentSource.ts`): Base for all data sources.
-   `EnricherPlugin`: For content enrichers.
-   `AiProvider`: For AI service wrappers.
-   `StoragePlugin` (from `src/plugins/storage/StoragePlugin.ts`): For database interactions.
-   `ConfigItem`: Defines the structure of plugin configurations in the main JSON files.
-   `InstanceConfig`: Represents a runtime instance of a configured plugin.

Additionally, some complex plugins or data types have their own detailed interfaces, such as:

-   `DiscordRawData`: Defines the comprehensive structure for raw data fetched by `DiscordRawDataSource.ts` (this JSON is often stored in the `ContentItem.text` field).
-   `DiscordSummary`: Defines the structure for detailed summaries generated by `DiscordSummaryGenerator.ts`, including sections for FAQs, help interactions, and action items.

Refer to `src/types.ts` for the complete definitions and to the respective plugin READMEs (in `src/plugins/...`) for how these types are utilized and configured. 